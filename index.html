<!DOCTYPE html>
<html>
<head>
	<title>随景听 定制开发</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
	<meta charset="utf-8">
	<style type="text/css">
		.main_bg{
			/*max-width: 560px;*/
			width: 100%;
			
		}
		.main_bg>img{width: 100%;}
		.suspension{position: fixed;
			bottom: 0px;
			right: 0px;
			border:1px solid red;
			width: 100%;
			height: 80px;background: #fff;
    border-radius: 15px 15px 0 0;
		}
		.list{
			    position: absolute;
    display: flex;
    top: -2rem;
    right: 0px;
    border: 1px solid red;
    width: 1rem;
    height: 1rem;
    font-size:  
		}
		.list>p{
			font-size: .23rem;
		}
		
	</style>
</head>
<body>
<div class="main_box">
	<div class="main_bg">
		<img src="https://p.pstatp.com/origin/fee200024663a73cc126">
	</div>
	<div class="suspension">

		<a class="list" href="https://www.hdk.net/">
			<img src="">
			<p>讲解列表</p>
		</a>

	</div>
</div>

</body>
<script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<script src="https://cdn.bootcdn.net/ajax/libs/Swiper/5.4.2/js/swiper.min.js"> </script>
<script>
	// 获取手机屏幕的宽／高，计算出html设置的font-size 参数
    (function(){
        var calc = function(){
            var docElement = document.documentElement;
            var clientWidthValue = docElement.clientWidth > 667 ? 667 : docElement.clientWidth;
            docElement.style.fontSize = 50*(clientWidthValue/375) + 'px';
        }
        calc();
        window.addEventListener('resize',calc);
    })();




    var touchScale = function() {
	     var startX, endX, scale, x1, x2, y1, y2, imgLeft, imgTop, imgWidth, imgHeight,
		 one = false, 
		 
	
	     $touch = $(".main_bg img"),  //选择放大缩小的元素
	     originalWidth = $touch.width(),
		 originalHeight = $touch.height(),
	     baseScale = parseFloat(originalWidth/originalHeight),
	     imgData = [],
	     bgTop = parseInt($(".main_bg img").css('top'));
	     function siteData(name) {
	          imgLeft = parseInt(name.css('left'));
	          imgTop = parseInt(name.css('top'));
	          imgWidth = name.width();
	          imgHeight = name.height();
	      }
	      $(document).on('touchstart touchmove touchend', $(".main_bg img"), function(event){
	
             var $me = $(".main_bg img");
             
             touch1 = event.originalEvent.targetTouches[0],  // 第一根手指touch事件
 
             touch2 = event.originalEvent.targetTouches[1],  // 第二根手指touch事件
 
             fingers = event.originalEvent.touches.length;   // 屏幕上手指数量
 
             //手指放到屏幕上的时候，还没有进行其他操作
             if (event.type == 'touchstart') {
                 if (fingers == 2) {
                     // 缩放图片的时候X坐标起始值
                     startX = Math.abs(touch1.pageX - touch2.pageX);
                     one = false;
                 }else if (fingers == 1) {
                     x1 = touch1.pageX;
                     y1 = touch1.pageY;
                     one = true;
                  }
              //siteData($me);
              }
              //手指在屏幕上滑动
              else if (event.type == 'touchmove') {
                   if (fingers == 2) {
                   // 缩放图片的时候X坐标滑动变化值
                   endX = Math.abs(touch1.pageX - touch2.pageX);
                   scale = endX - startX;
          
                   $me.css({
                        'width' : originalWidth + scale,
                        'height' :originalWidth + scale
                   });  
                   
   				}else if (fingers == 1) {
                    x2 = touch1.pageX;
                    y2 = touch1.pageY;
//                     if (one) {
//                          $me.css({
//                          'left' : imgLeft + (x2 - x1),
//                           'top' : imgTop + (y2 - y1)
//                          });
//                      }
                }
          }
           //手指移开屏幕
          else if (event.type == 'touchend') {
          // 手指移开后保存图片的宽
                originalWidth = $touch.width(),
                siteData($me);
                        imgData = [[imgLeft, imgTop-bgTop, imgWidth, imgHeight],[0, 0, 640, 640]];
                    }
                });
                var getData = function(){
                    return imgData;
                };
                return {
                    imgData : getData
                }
      };
</script>
</html>

